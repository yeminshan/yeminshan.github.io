---
title: 功能集合
date: 2020-07-20 10:28:09
tags:
categories:
---

# 下载

1. <a href="文件链接" download='下载文件名'></a>

2. <iframe src="downloadUrl" >

3. window.open(downloadUrl, "\_blank")

4. ajax 下载

```js
//先请求音频的链接,再把返回值转换成二进制,再根据他二进制对象生成新链接,再创建a标签,点击a标签
//这是vue里面的写的普通页面也差不多
    this.$axios({
    method: 'get',
    url: row.src,
    responseType: 'blob'  //这个不能少,让response二进制形式,如果你按照网上教程不设置这个将返回值进行BLOB([])进行处理可能会出现解析错误
}).then(response => {
    const href = URL.createObjectURL(response.data); //根据二进制对象创造新的链接
    const a = document.createElement('a');
    a.setAttribute('href', href);
    a.setAttribute('download', row.title);
    a.click();
    URL.revokeObjectURL(href);
}

//  getObjectURL (file) {
//       let url = null;
//       if (window.createObjectURL != undefined) { // basic
//         url = window.createObjectURL(file);
//       } else if (window.webkitURL != undefined) { // webkit or chrome
//         try {
//           url = window.webkitURL.createObjectURL(file);
//         } catch (error) {

//         }
//       } else if (window.URL != undefined) { // mozilla(firefox)
//         try {
//           url = window.URL.createObjectURL(file);
//         } catch (error) {

//         }
//       }
//       return url;
//     }

```

[参考](https://www.jianshu.com/p/bb48b64db783)

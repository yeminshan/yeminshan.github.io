---
title: 初嘗微前端
date: 2020-12-28 16:35:59
tags: ["微前端", "qiankun"]
categories:
---

# 前言

现有的微前端解决方案：

1. iframe

   提供了浏览器原生的硬隔离方案，不论是样式隔离、js 隔离这类问题统统都能被完美解决
   缺点

主页面和 iframe 共享最大允许的 HTTP 链接数。
iframe 阻塞主页面加载。
浏览器的后退按钮无效
隔离性无法被突破，导致应用间上下文无法被共享 2. 服务端模板组合

通过 Nginx 服务器根据 url 路径动态设置要加载的模板：
优点

实现简单
技术栈独立
缺点

需要额外配置 Nginx
前后端分离不彻底

3.微前端框架 single-spa

single-spa 的实现原理并不难，从架构上来讲可以分为两部分：子应用和容器应用。

子应用与传统的单页应用的区别在于

- 不需要 HTML 入口文件，
- js 入口文件导出的模块，必须包括 bootstrap、mount 和 unmount 三个方法。

容器应用主要负责注册应用，当 url 命中子应用的路由时激活并挂载子应用，或者当子应用不处于激活状态时，将子应用从页面中移除卸载。其核心方法有两个：

- `registerApplication` 注册并下载子应用
- `start` 启动处于激活状态的子应用。

优点

- 纯前端解决方案
- 可以使用多种技术栈
- 完善的生态

缺点

- 上手成本高
- 需要改造现有应用
- 跨应用的联调变得复杂

